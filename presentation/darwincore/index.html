<!doctype html>
<html>
<head>
<title>Biodiversity data standards</title>
<meta charset="utf-8">
<style>
@import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
@import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
@import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);
body {
	font-family: 'Droid Serif';
}
h1, h2, h3 {
	font-family: 'Yanone Kaffeesatz';
	font-weight: normal;
}
h4 {
	font-family: 'Yanone Kaffeesatz';
	font-weight: bold;
	font-size: 1.2em;
	margin-top: 1em;
	margin-bottom: 0.8em;
}
.remark-code, .remark-inline-code {
  font-family: 'Ubuntu Mono';
  color: #cc3300;
}
a {
	color: #3399ff;
	text-decoration: none;
}
li {
	padding-bottom: 1em;
}
.center {
	text-align: center;
}
</style>
</head>
<body>
<textarea id="source">

class: center, middle

# Biodiversity data standards:<br/>Darwin Core

---
class: middle, center

<p class="center"><img src="standards.png" width="70%"/></p>

---

## Read more:

https://github.com/iobis/training/wiki

---

# Darwin Core

- [Darwin Core](http://rs.tdwg.org/dwc/) is a body of standards for biodiversity informatics.
- Darwin Core is maintained by [TDWG](http://tdwg.org/) (Biodiversity Information Standards, formerly The International Working Group on Taxonomic Databases).
- It provides stable [terms](http://rs.tdwg.org/dwc/terms/) and vocubularies for sharing biodiversity data.
- Terms have definitions to promote consistent use across applications.
- The [OBIS schema](http://iobis.org/node/304) was based on [Simple Darwin Core](http://rs.tdwg.org/dwc/terms/simple/), a subset of Darwin Core which does not allow any structure beyond rows and columns. It added some terms which were important for OBIS but not supported by Darwin Core at the time.
- OBIS is now transitioning to Darwin Core.

---

# Darwin Core

- A template with all terms relevant for OBIS can be found at https://github.com/iobis/template.

<p class="center"><img src="template.png" width="90%"/></p>

---

# Record level terms

#### basisOfRecord

This term is required in Darwin Core Archive occurrence records. Possible values are `PreservedSpecimen`, `FossilSpecimen`, `LivingSpecimen`, `HumanObservation`, and `MachineObservation`. Examples of machine observations are satellite tracking or continuous plankton recorder datasets.

#### institutionCode

`ìnstitutionCode` should contain an identifier for the institution that owns the data.

#### collectionCode

`collectionCode` identifies the collection or dataset within an institution.

#### catalogNumber

`catalogNumber` identifies a record within a dataset.

---

# Record level terms

#### occurrenceID

`occurrenceID` should be globally unique. It can be constructed from the `institutionCode`, the `collectionCode` and the `catalogNumber`.<br/><br/>

```xml
institutionCode   collectionCode   catalogNumber   occurrenceID
--------------- ---------------- --------------- --------------
           VLIZ             NSBS             123   VLIZ_NSB_123 
           VLIZ             NSBS             456   VLIZ_NSB_456 
```

---

# Taxonomy and identification

#### scientificName

`scientificName` should always contain the originally recorded scientific name, even if it is invalid. This is necessary to be able to track back records to the original dataset. The name should be at the lowest possible taxonomic rank.

#### scientificNameID

A [WoRMS](http://www.marinespecies.org/) [LSID](https://en.wikipedia.org/wiki/LSID) should be added in `scientificNameID`. OBIS will use this identifier to link the record to the accepted taxonomic name.

#### scientificNameAuthorship

We recommend to not include authorship in `scientificName`, and only use `scientificNameAuthorship` for that purpose.

---

# Taxonomy and identification

#### identificationQualifier

Identification qualifiers (such as cf. or aff.) should go in `identificationQualifier`.

#### kingdom, taxonRank

`kingdom` and `taxonRank` can aid us in identifying the taxon that `scientificName` refers to, although is is not necessay when an `scientificNameID` is provided.

```xml
   scientificName   scientificNameAuthorship                          scientificNameID   taxonRank 
----------------- -------------------------- ----------------------------------------- ----------- 
Lanice conchilega               Pallas, 1766 urn:lsid:marinespecies.org:taxname:131495     species 
```

---

# Occurrence

#### occurrenceStatus

`occurrenceStatus` is an important term, because it allows us to distinguish between presence and absence records. We recommend to always fill in this field and to use `present` or `absent`.

#### organismQuantity

A few terms related to quantity, `organismQuantity` and `organismQuantityType`, have been recently added to Darwin Core. This is a lot more versatile than the older `individualCount` field. `organismQuantity` should contain the the quantity value. 

#### organismQuantityType

`organismQuantityType` contains the parameter and units. There is a [recommended vocabulary](http://rs.gbif.org/vocabulary/gbif/quantity_type_2015-07-10.xml) for `organismQuantityType` which includes values such as `individuals`, `biomassAFDG` (biomass ash free dry weight in gram), `percentageOfBiomass` and `percentageCoverage`. The quantity terms should be used together with the new sample size related fields.

---

# Occurrence

```xml
eventID     scientificName   occurrenceStatus   organismQuantity   organismQuantityType 
------- ------------------ ------------------ ------------------ ---------------------- 
      1          Abra alba            present                 12              organisms 
      1  Pectinaria koreni            present                 48              organisms 
      2          Abra alba             absent                  0              organisms 
      2  Pectinaria koreni            present                 48              organisms 
```

---

# Occurrence

#### individualCount

`individualCount` has been used a lot in the past, but we recommend to use the newer `organismQuantity` and `organismQuantityType` terms now.

#### sex

The recommended vocabulary for `sex` can be found [here](http://rs.gbif.org/vocabulary/gbif/sex.xml).

<p class="center"><img src="sex_1.png" width="47%" /> <img src="sex_2.png" width="47%" /></p>

---

# Occurrence

#### lifeStage

<p class="center"><img src="lifestage.png" width="47%" /> <img src="lifestage_2.png" width="47%" /></p>

---

# Location

#### decimalLatitude, decimalLongitude

Occurrence coordinates should be provided in decimal degrees on the [WGS 84](https://en.wikipedia.org/wiki/World_Geodetic_System) (EPSG:4326) geodetic datum.

#### coordinateUncertaintyInMeters

A `coordinateUncertaintyInMeters` should be provided along with the coordinates. This is the smallest circle around the given `decimalLatitude` and `decimalLongitude` containing the whole location.

#### geodeticDatum

Recommended best practice is use the [EPSG code](https://www.epsg-registry.org/).

---

# Location

#### footprintWKT

A [Well-Known Text](https://en.wikipedia.org/wiki/Well-known_text) (WKT) representation of the shape of the location can be provided in `footprintWKT`. This is particularly useful for tracks, transects, tows, trawls, or when an exact location is not known.

Examples:

```WKT
LINESTRING (30 10, 10 30, 40 40)
POLYGON ((30 10, 40 40, 20 40, 10 20, 30 10))
MULTILINESTRING ((10 10, 20 20, 10 40),(40 40, 30 30, 40 20, 30 10))
MULTIPOLYGON (((30 20, 45 40, 10 40, 30 20)),((15 5, 40 10, 10 20, 5 10, 15 5)))
```

#### minimumDepthInMeters, maximumDepthInMeters

This should be the depth at which the sample was taken, not the water column depth at that location!

---

# Location

<p class="center"><a href="http://iobis.github.io/wkt" target="_blank"><img src="wkttool.png" width="100%"/></a></p>

---

# Location

#### locality

#### locationAccordingTo

This contains the source of a locality name. This can for example be a gazetteer such as [Marine Regions](http://www.marineregions.org/).

<br/><p class="center"><img src="gazetteer.png" width="90%"/></p>

---

# Location

#### contintent
#### waterBody
#### islandGroup
#### island
#### country
#### stateProvince
#### county
#### municipality

---

# Location
### Common problems

- coordinates in degrees/minutes/seconds
- coordinates containing north/east/south/west
- longitude and latitude swapped
- zero longitude and latitude
- coordinates on land (not necessarily a problem)
- longitude outside -180°/180°, latitude outside -90°/90°

---

# Location
### Common problems

- negative depth
- `minimumDepthInMeters` > `maximumDepthInMeters`
- `maximumDepthInMeters` > bathymetric depth
- depth not in meters

---

# Location
### Solution

- plot your points on a [map](http://iobis.github.io/dwca/)!
<p class="center"><img src="tuna_before.png" width="90%" /></p>

---

# Location
### Solution

- plot your points on a [map](http://iobis.github.io/dwca/)!
<p class="center"><img src="tuna_after.png" width="90%" /></p>

---

# Location
### Solution

- explore your data
<p class="center"><img src="acartia.png" width="90%" /></p>


---

# Time

<p class="center"><img src="public.png"/></p>

---

# Time

#### eventDate

The date and time at which an occurrence was recorded goes in `eventDate`. This terms uses the [ISO 8601 standard](https://en.wikipedia.org/wiki/ISO_8601).

<p class="center"><img src="iso.jpg" width="50%"/></p>

Some examples:

```R
1973-02-28T15:25:00
2005-08-31T12:11+12
1993-01-26T04:39+12/1993-01-26T05:48+12
2008-04-25T09:53
1948-09-13
1993-01/02
```

---

# Sampling

#### eventID

An identifier for event, i.e. something that happened at a certain place and time.

#### parentEventID

An identifier for a parent event. This must refer to an existing `eventID`.

---

# Sampling

<p class="center"><img src="whittaker.gif" width="50%"/></p>

---

# Sampling

<p class="center"><img src="core.jpg"/></p>

---

# Sampling

```xml
parentEventID   eventID           scientificName   eventDate   sampleSizeValue      sampleSizeUnit 
------------- --------- ------------------------ ----------- ----------------- ------------------- 
                      1                Abra alba  2015-10-02               0.5        square metre 
                      1        Lanice conchilega  2015-10-02               0.5        square metre 
            1         2       Sabatieria pulchra  2015-10-02                10   square centimetre 
            1         2   Leptolaimus sebastiani  2015-10-02                10   square centimetre 
            1         3     Pselionema longiseta  2015-10-02                10   square centimetre 
            1         3       Pselionema simplex  2015-10-02                10   square centimetre 
```

---

# Sampling

#### sampleSizeValue

`sampleSizeValue` and `sampleSizeUnit` are very important when a organism quantity is specified. 

#### sampleSizeUnit

Recommended best practice is to use [SI units](https://en.wikipedia.org/wiki/International_System_of_Units) or [non-SI units](https://en.wikipedia.org/wiki/Non-SI_units_mentioned_in_the_SI) accepted for use with SI for the `sampleSizeUnit`. Examples are `litre`, `square metre` and `cubic centimetre`.

#### samplingProtocol

#### samplingEffort

---

# Darwin Core Archive

- Darwin Core Archive (DwC-A) is a biodiversity informatics data standard that makes use of the Darwin Core terms to produce a single, self-contained dataset.
- Collection of text and xml files.
- Metadata in [Ecological Metadata Language](https://en.wikipedia.org/wiki/Ecological_Metadata_Language) (EML).
- Can be served through the [GBIF Integrated Publishing Toolkit](http://www.gbif.org/ipt) (IPT).

---

# Darwin Core Archive

<p class="center"><img src="dwca_1.png" width="80%"/></p>

[Example: 70 samples data of Kiel Bay](http://ipt.vliz.be/eurobis/resource?r=kielbay70)

---

# Darwin Core Archive

<p class="center"><img src="dwca_2.png" width="80%"/></p>

[Example: A study of the nematode fauna of three estuaries in the Netherlands](http://ipt.vliz.be/eurobis/resource?r=manuela_uy)

---

# Darwin Core Archive
### Archive descriptor (meta.xml)

```xml
<archive xmlns="http://rs.tdwg.org/dwc/text/" metadata="eml.xml">
  <core encoding="UTF-8" fieldsTerminatedBy="\t" linesTerminatedBy="\n" fieldsEnclosedBy="" ignoreHeaderLines="1" rowType="http://rs.tdwg.org/dwc/terms/Event">
    <files>
      <location>event.txt</location>
    </files>
    <id index="0" />
    <field index="1" term="http://rs.tdwg.org/dwc/terms/eventID"/>
    <field index="2" term="http://rs.tdwg.org/dwc/terms/parentEventID"/>
    <field index="3" term="http://rs.tdwg.org/dwc/terms/decimalLatitude"/>
    <field index="4" term="http://rs.tdwg.org/dwc/terms/decimalLongitude"/>
  </core>
```

---

# Darwin Core Archive
### Archive descriptor (meta.xml)

```xml
  <extension encoding="UTF-8" fieldsTerminatedBy="\t" linesTerminatedBy="\n" fieldsEnclosedBy="" ignoreHeaderLines="1" rowType="http://rs.tdwg.org/dwc/terms/Occurrence">
    <files>
      <location>occurrence.txt</location>
    </files>
    <coreid index="0" />
    <field index="1" term="http://rs.tdwg.org/dwc/terms/basisOfRecord"/>
    <field index="2" term="http://rs.tdwg.org/dwc/terms/occurrenceID"/>
    <field index="3" term="http://rs.tdwg.org/dwc/terms/scientificName"/>
  </extension>
```

---

# Darwin Core Archive
### Archive descriptor (meta.xml)

```xml
  <extension encoding="UTF-8" fieldsTerminatedBy="\t" linesTerminatedBy="\n" fieldsEnclosedBy="" ignoreHeaderLines="1" rowType="http://rs.tdwg.org/dwc/terms/MeasurementOrFact">
    <files>
      <location>measurementorfact.txt</location>
    </files>
    <coreid index="0" />
    <field index="1" term="http://rs.tdwg.org/dwc/terms/measurementType"/>
    <field index="2" term="http://rs.tdwg.org/dwc/terms/measurementValue"/>
    <field index="3" term="http://rs.tdwg.org/dwc/terms/measurementUnit"/>
    <field index="4" term="http://rs.tdwg.org/dwc/terms/measurementMethod"/>
  </extension>
</archive>
```

---

# Darwin Core Archive
### Metadata (eml.xml)

```xml
<eml:eml xmlns:eml="eml://ecoinformatics.org/eml-2.1.1"
  xmlns:dc="http://purl.org/dc/terms/"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="eml://ecoinformatics.org/eml-2.1.1 http://rs.gbif.org/schema/eml-gbif-profile/1.1/eml.xsd"
  packageId="http://ipt.vliz.be/eurobis/resource?id=manuela_uy/v1.1" system="http://gbif.org" scope="system"
  xml:lang="en">

<dataset>
  <alternateIdentifier>http://ipt.vliz.be/eurobis/resource?r=manuela_uy</alternateIdentifier>
  <title xml:lang="en">A study of the nematode fauna of three estuaries in the Netherlands</title>
  <creator>
    <organizationName>Universiteit Gent; Faculteit Wetenschappen; Vakgroep Biologie Onderzoeksgroep Mariene Biologie</organizationName>
    <electronicMailAddress>isolde.degrem@ugent.be</electronicMailAddress>
  </creator>
  <metadataProvider>
    <individualName>
      <givenName>EurOBIS</givenName>
      <surName>Data Management Team</surName>
```

</textarea>
<script src="https://gnab.github.io/remark/downloads/remark-latest.min.js">
</script>
<script>
var slideshow = remark.create({
  navigation: {
    scroll: false
  }
});
</script>
</body>
</html>